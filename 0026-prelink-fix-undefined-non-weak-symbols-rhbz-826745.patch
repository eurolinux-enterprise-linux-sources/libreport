From 601f4d59d442fd3d33e29d9690d24f0470fb0168 Mon Sep 17 00:00:00 2001
From: Jiri Moskovcak <jmoskovc@redhat.com>
Date: Thu, 12 Jul 2012 13:34:36 +0200
Subject: [PATCH 26/53] prelink: fix undefined non-weak symbols rhbz#826745

Signed-off-by: Nikola Pajkovsky <npajkovs@redhat.com>
---
 src/gtk-helpers/Makefile.am | 3 ++-
 src/lib/Makefile.am         | 4 ++--
 2 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/src/gtk-helpers/Makefile.am b/src/gtk-helpers/Makefile.am
index 75182f5..188e48f 100644
--- a/src/gtk-helpers/Makefile.am
+++ b/src/gtk-helpers/Makefile.am
@@ -27,7 +27,8 @@ libreport_gtk_la_LDFLAGS = \
 libreport_gtk_la_LIBADD = \
     $(GTK_LIBS) \
     $(GLIB_LIBS) \
-    $(GNOME_KEYRING_LIBS)
+    $(GNOME_KEYRING_LIBS) \
+    ../lib/libreport.la
 
 EXTRA_DIST = libreport-gtk.pc.in
 
diff --git a/src/lib/Makefile.am b/src/lib/Makefile.am
index 6315591..d286116 100644
--- a/src/lib/Makefile.am
+++ b/src/lib/Makefile.am
@@ -108,7 +108,6 @@ libabrt_web_la_CPPFLAGS = \
     $(PROXY_CFLAGS) \
     $(LIBXML_CFLAGS) \
     $(XMLRPC_CFLAGS) $(XMLRPC_CLIENT_CFLAGS) \
-    $(LIBREPORT_CFLAGS) \
     $(JSON_C_CFLAGS) \
     $(BTPARSER_CFLAGS) \
     -D_GNU_SOURCE
@@ -121,7 +120,8 @@ libabrt_web_la_LIBADD = \
     $(LIBXML_LIBS) \
     $(JSON_C_LIBS) \
     $(BTPARSER_LIBS) \
-    $(XMLRPC_LIBS) $(XMLRPC_CLIENT_LIBS)
+    $(XMLRPC_LIBS) $(XMLRPC_CLIENT_LIBS) \
+    libreport.la
 
 $(DESTDIR)/$(DEBUG_DUMPS_DIR):
 	$(mkdir_p) '$@'
-- 
1.7.11.2

