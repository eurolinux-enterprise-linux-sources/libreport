From c06760644e2fd9ebda257d403ee48993b009aee7 Mon Sep 17 00:00:00 2001
From: Jakub Filak <jfilak@redhat.com>
Date: Tue, 17 Dec 2013 21:05:18 +0100
Subject: [LIBREPORT PATCH] remove left over debug stmts from conf files fns

Related to #205

Signed-off-by: Jakub Filak <jfilak@redhat.com>
---
 src/lib/configuration_files.c | 9 +++++----
 1 file changed, 5 insertions(+), 4 deletions(-)

diff --git a/src/lib/configuration_files.c b/src/lib/configuration_files.c
index 0b8eee9..82f80f1 100644
--- a/src/lib/configuration_files.c
+++ b/src/lib/configuration_files.c
@@ -111,24 +111,25 @@ static void internal_aug_error_msg(augeas *aug, const char *def_msg)
 {
     const char *err_msg = def_msg;
 
-    //if (aug_error(aug) != AUG_NOERROR)
+    if (aug_error(aug) != AUG_NOERROR)
     {
         /* Try to get the most detailed error. */
         err_msg = aug_error_details(aug);
-        error_msg("%s", err_msg);
 
         if (err_msg == NULL)
             /* The detailed error message was not provided. */
             /* Try to get a message elaborating the error code. */
             err_msg = aug_error_minor_message(aug);
 
-        error_msg("%s", err_msg);
         if (err_msg == NULL)
             /* No more detailed message for the error code. */
             /* Get a message for the error code. */
             err_msg = aug_error_message(aug);
 
-        error_msg("%s", err_msg);
+        if (err_msg == NULL)
+            /* Paranoia: aug_error_message() always return a message, */
+            /* at leas "No error" */
+            err_msg = def_msg;
     }
 
     error_msg("%s", err_msg);
-- 
1.8.3.1

