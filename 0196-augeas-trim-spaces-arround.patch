From a5706656ba4d4eb81ee1e7f41c0767ba6c136133 Mon Sep 17 00:00:00 2001
From: Jakub Filak <jfilak@redhat.com>
Date: Mon, 2 Dec 2013 16:57:02 +0100
Subject: [PATCH] augeas: trim spaces arround '='

and include all libreport configuration files

Resolves: #1262246
---
 augeas/libreport.aug      | 6 +++++-
 augeas/test_libreport.aug | 8 ++++----
 2 files changed, 9 insertions(+), 5 deletions(-)

diff --git a/augeas/libreport.aug b/augeas/libreport.aug
index dd5ba61..f0ea0af 100644
--- a/augeas/libreport.aug
+++ b/augeas/libreport.aug
@@ -2,7 +2,7 @@ module Libreport =
     autoload xfm
 
     (* Define useful primitives *)
-    let value_sep    = del / = ?/ " = "
+    let value_sep    = del / ?= ?/ " = "
     let value_to_eol = store /([^ \t\n].*[^ \t\n]|[^ \t\n]?)/
     let eol          = del /\n/ "\n"
     let ident        = /[a-zA-Z][a-zA-Z_]+/
@@ -20,7 +20,11 @@ module Libreport =
     let lns = ( comment | empty | option )*
 
     let filter = (incl "/etc/libreport/plugins/*")
+               . (incl "/etc/libreport/events/*")
                . (incl (Sys.getenv("HOME") . "/.config/abrt/settings/*"))
+               . (incl (Sys.getenv("XDG_CACHE_HOME") . "/abrt/events/*"))
+               . (incl (Sys.getenv("HOME") . "/.cache/abrt/events/*"))
+               . (excl "/etc/libreport/events/*.xml")
                . Util.stdexcl
 
     let xfm = transform lns filter
diff --git a/augeas/test_libreport.aug b/augeas/test_libreport.aug
index a49474e..b6d319e 100644
--- a/augeas/test_libreport.aug
+++ b/augeas/test_libreport.aug
@@ -19,8 +19,8 @@ Password =
 DontMatchComponents = selinux-policy
 
 # for more info about these settings see: https://github.com/abrt/abrt/wiki/FAQ#creating-private-bugzilla-tickets
-# CreatePrivate = no
-# PrivateGroups = private
+CreatePrivate= no
+PrivateGroups=private
 "
 
     test Libreport.lns get conf =
@@ -43,5 +43,5 @@ DontMatchComponents = selinux-policy
         { "DontMatchComponents" = "selinux-policy" }
         {}
         { "#comment" = "for more info about these settings see: https://github.com/abrt/abrt/wiki/FAQ#creating-private-bugzilla-tickets" }
-        { "#comment" = "CreatePrivate = no" }
-        { "#comment" = "PrivateGroups = private" }
+        { "CreatePrivate" = "no" }
+        { "PrivateGroups" = "private" }
-- 
2.6.3

