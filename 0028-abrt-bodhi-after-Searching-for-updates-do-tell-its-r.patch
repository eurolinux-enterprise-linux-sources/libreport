From 5673c817911c6f0f6ef7c4a38e534906c5437faa Mon Sep 17 00:00:00 2001
From: Denys Vlasenko <vda.linux@googlemail.com>
Date: Mon, 21 May 2012 14:42:17 +0200
Subject: [PATCH 28/53] abrt-bodhi: after "Searching for updates", do tell its
 result if it's negative

Signed-off-by: Denys Vlasenko <vda.linux@googlemail.com>
---
 src/plugins/abrt-bodhi.c | 8 +++++++-
 1 file changed, 7 insertions(+), 1 deletion(-)

diff --git a/src/plugins/abrt-bodhi.c b/src/plugins/abrt-bodhi.c
index 43a3b42..3275086 100644
--- a/src/plugins/abrt-bodhi.c
+++ b/src/plugins/abrt-bodhi.c
@@ -298,7 +298,6 @@ static GHashTable *bodhi_query_list(const char *query, const char *release)
         NULL
     };
 
-    log(_("Searching for updates"));
     abrt_post_string(post_state, bodhi_url_bugs, "application/x-www-form-urlencoded",
                      headers, query);
 
@@ -430,11 +429,15 @@ int main(int argc, char **argv)
     if (query->buf[query->len - 1] == '&')
         query->buf[query->len - 1] = '\0';
 
+    log(_("Searching for updates"));
     GHashTable *update_hash_tbl = bodhi_query_list(query->buf, release);
     strbuf_free(query);
 
     if (!update_hash_tbl || !g_hash_table_size(update_hash_tbl))
+    {
+        log(_("No updates for this package found"));
         return 0;
+    }
 
     GHashTableIter iter;
     char *name = NULL;
@@ -454,7 +457,10 @@ int main(int argc, char **argv)
     }
 
     if (!q->len)
+    {
+        log(_("Local version of the package is newer than available updates"));
         return 0;
+    }
 
     strbuf_prepend_str(q, _("Abrt found a new update which fix your problem. Please run "
                             "before submitting bug: pkcon update --repo-enable=fedora --repo"
-- 
1.7.11.2

