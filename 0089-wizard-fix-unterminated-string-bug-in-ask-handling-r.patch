From d5d4414f2594465e2edf4132f03b4c9b79de6b1e Mon Sep 17 00:00:00 2001
From: Jiri Moskovcak <jmoskovc@redhat.com>
Date: Thu, 4 Apr 2013 16:26:48 +0200
Subject: [RHEL6 LIBREPORT PATCH 89/94] wizard: fix "unterminated string" bug
 in ask() handling rhbz#948286

Signed-off-by: Denys Vlasenko <dvlasenk@redhat.com>
Signed-off-by: Jiri Moskovcak <jmoskovc@redhat.com>
---
 src/gui-wizard-gtk/wizard.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/gui-wizard-gtk/wizard.c b/src/gui-wizard-gtk/wizard.c
index c24ca8c..57365bd 100644
--- a/src/gui-wizard-gtk/wizard.c
+++ b/src/gui-wizard-gtk/wizard.c
@@ -1626,6 +1626,8 @@ static gboolean consume_cmd_output(GIOChannel *source, GIOCondition condition, g
                     response = xstrdup("<WRITE ERROR>");
                     log_response = response;
                 }
+                else
+                    response[len - 1] = '\0';
                 strbuf_append_char(cmd_output, ' ');
                 strbuf_append_str(cmd_output, log_response);
                 free(response);
-- 
1.8.2.1

